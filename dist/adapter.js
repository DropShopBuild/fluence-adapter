"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.makeExecute = exports.endpointSelector = exports.execute = void 0;
const tslib_1 = require("tslib");
const ea_bootstrap_1 = require("@chainlink/ea-bootstrap");
const config_1 = require("./config");
const endpoints = tslib_1.__importStar(require("./endpoint"));
const execute = async (request, context, config) => {
    config = config || config_1.makeConfig();
    return ea_bootstrap_1.Builder.buildSelector(request, context, config, endpoints);
};
exports.execute = execute;
const endpointSelector = (request) => ea_bootstrap_1.Builder.selectEndpoint(request, config_1.makeConfig(), endpoints);
exports.endpointSelector = endpointSelector;
const makeExecute = (config) => {
    return async (request, context) => exports.execute(request, context, config || config_1.makeConfig());
};
exports.makeExecute = makeExecute;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRhcHRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9hZGFwdGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSwwREFBa0Q7QUFRbEQscUNBQXNDO0FBQ3RDLDhEQUF3QztBQUVqQyxNQUFNLE9BQU8sR0FBOEIsS0FBSyxFQUNyRCxPQUFPLEVBQ1AsT0FBTyxFQUNQLE1BQU0sRUFDTixFQUFFO0lBQ0YsTUFBTSxHQUFHLE1BQU0sSUFBSSxtQkFBVSxFQUFFLENBQUM7SUFDaEMsT0FBTyxzQkFBTyxDQUFDLGFBQWEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztBQUNwRSxDQUFDLENBQUM7QUFQVyxRQUFBLE9BQU8sV0FPbEI7QUFFSyxNQUFNLGdCQUFnQixHQUFHLENBQUMsT0FBdUIsRUFBZSxFQUFFLENBQ3ZFLHNCQUFPLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxtQkFBVSxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFEOUMsUUFBQSxnQkFBZ0Isb0JBQzhCO0FBRXBELE1BQU0sV0FBVyxHQUEyQixDQUFDLE1BQU8sRUFBRSxFQUFFO0lBQzdELE9BQU8sS0FBSyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUNoQyxlQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLElBQUksbUJBQVUsRUFBRSxDQUFDLENBQUM7QUFDdEQsQ0FBQyxDQUFDO0FBSFcsUUFBQSxXQUFXLGVBR3RCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnVpbGRlciB9IGZyb20gXCJAY2hhaW5saW5rL2VhLWJvb3RzdHJhcFwiO1xuaW1wb3J0IHtcbiAgQWRhcHRlclJlcXVlc3QsXG4gIEFQSUVuZHBvaW50LFxuICBFeGVjdXRlRmFjdG9yeSxcbiAgRXhlY3V0ZVdpdGhDb25maWcsXG4gIENvbmZpZyxcbn0gZnJvbSBcIkBjaGFpbmxpbmsvdHlwZXNcIjtcbmltcG9ydCB7IG1ha2VDb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCAqIGFzIGVuZHBvaW50cyBmcm9tIFwiLi9lbmRwb2ludFwiO1xuXG5leHBvcnQgY29uc3QgZXhlY3V0ZTogRXhlY3V0ZVdpdGhDb25maWc8Q29uZmlnPiA9IGFzeW5jIChcbiAgcmVxdWVzdCxcbiAgY29udGV4dCxcbiAgY29uZmlnXG4pID0+IHtcbiAgY29uZmlnID0gY29uZmlnIHx8IG1ha2VDb25maWcoKTtcbiAgcmV0dXJuIEJ1aWxkZXIuYnVpbGRTZWxlY3RvcihyZXF1ZXN0LCBjb250ZXh0LCBjb25maWcsIGVuZHBvaW50cyk7XG59O1xuXG5leHBvcnQgY29uc3QgZW5kcG9pbnRTZWxlY3RvciA9IChyZXF1ZXN0OiBBZGFwdGVyUmVxdWVzdCk6IEFQSUVuZHBvaW50ID0+XG4gIEJ1aWxkZXIuc2VsZWN0RW5kcG9pbnQocmVxdWVzdCwgbWFrZUNvbmZpZygpLCBlbmRwb2ludHMpO1xuXG5leHBvcnQgY29uc3QgbWFrZUV4ZWN1dGU6IEV4ZWN1dGVGYWN0b3J5PENvbmZpZz4gPSAoY29uZmlnPykgPT4ge1xuICByZXR1cm4gYXN5bmMgKHJlcXVlc3QsIGNvbnRleHQpID0+XG4gICAgZXhlY3V0ZShyZXF1ZXN0LCBjb250ZXh0LCBjb25maWcgfHwgbWFrZUNvbmZpZygpKTtcbn07XG4iXX0=